.TH GENUP 8 "Version 1.1.1: January 2026"
.SH NAME
genup \- update Portage tree, all installed packages, and kernel
.SH SYNOPSIS
.B genup
[\fIoptions\fR]
.SH DESCRIPTION
.B genup
is a utility intended to simplify the process of keeping your Gentoo system
up to date.
When invoked, it automatically performs the following steps, in order:
.br
.RS
.IP \(bu 2
updates Portage tree & overlays; syncs \fBeix\fR(1)
(if desired)
.br
(using, if needed, \fBemaint sync --auto\fR, and \fBeix-sync\fR)
.IP \(bu 2
updates Portage user patches (if present)
.br
(using \fBgit -C /etc/portage/patches pull\fR)
.IP \(bu 2
updates selected toolchain packages first (best effort)
.br
(using \fBemerge --oneshot --update\fR for
\fBsys-devel/gcc\fR,
\fBsys-libs/glibc\fR,
\fBsys-devel/binutils\fR,
\fBdev-build/cmake\fR)
.IP \(bu 2
checks and repairs gcc configuration if invalid (best effort)
.br
(using \fBgcc-config\fR(1), \fBenv-update\fR, and re-emerging \fBlibtool\fR)
.IP \(bu 2
mounts \fI/boot\fR if required, and remounts writable when necessary
.br
(using \fBfindmnt\fR(8), \fBmount\fR(8), and \fBumount\fR(8))
.IP \(bu 2
removes any prior \fBemerge\fR(1) resume history
.br
(using \fBemaint --fix cleanresume\fR)
.IP \(bu 2
on aarch64, attempts to apply any pending fixups
.br
(if desired, by running \fI/etc/cron.weekly/fixup\fR; errors non-fatal)
.IP \(bu 2
ensures Portage itself is up-to-date (best effort)
.br
(using \fBemerge --oneshot --update sys-apps/portage\fR; failures are warnings)
.IP \(bu 2
ensures genup itself is up-to-date (restarting if the version changes)
.br
(using \fBemerge --oneshot app-portage/genup\fR)
.IP \(bu 2
attempts a preliminary @world update using \fBemtee\fR(1)
.br
(if \fBemtee\fR is installed and not disabled; failure is non-fatal)
.IP \(bu 2
updates all packages in the @world set
.br
(using \fBemerge --deep --with-bdeps=y --changed-use --update @world\fR,
with backtracking and retry logic)
.IP \(bu 2
optionally rebuilds live (-9999) packages
.br
(using \fBemerge @live-rebuild\fR)
.IP \(bu 2
removes unreferenced packages (first pass)
.br
(using \fBemerge --depclean\fR; skipped if \fBwebapp-config\fR reports unused installs)
.IP \(bu 2
rebuilds packages depending on stale libraries
.br
(using \fBemerge @preserved-rebuild\fR; run twice, second pass suppressing getbinpkg)
.IP \(bu 2
fixes missing shared library dependencies
.br
(using \fBrevdep-rebuild\fR)
.IP \(bu 2
updates any old \fBperl\fR(1) modules (if desired)
.br
(using \fBperl-cleaner --all\fR)
.IP \(bu 2
upgrades the kernel if possible (to staging, in \fI/boot\fR)
.br
(using \fBbuildkernel --stage-only\fR when available; otherwise \fBgenkernel\fR)
.IP \(bu 2
builds any external modules (such as those for VirtualBox)
.br
(using \fBemerge @module-rebuild --exclude '*-bin'\fR)
.IP \(bu 2
resolves clashing config file changes
.br
(using \fBdispatch-conf\fR; always in interactive mode, or if forced)
.IP \(bu 2
removes unreferenced packages (second pass)
.br
(using \fBemerge --depclean\fR)
.IP \(bu 2
fixes missing shared library dependencies (second check)
.br
(using \fBrevdep-rebuild\fR)
.IP \(bu 2
rebuilds packages depending on stale libraries (second pass)
.br
(using \fBemerge @preserved-rebuild\fR)
.IP \(bu 2
removes any unused source tarballs (if desired)
.br
(using \fBeclean --deep distfiles\fR)
.IP \(bu 2
deploys new kernel from staging (if desired and available)
.br
(using \fBbuildkernel --copy-from-staging\fR)
.IP \(bu 2
updates environment settings
.br
(using \fBenv-update\fR)
.IP \(bu 2
updates the \fBeix\fR(1) package metadata (if desired)
.br
(using \fBeix-sync -0\fR)
.IP \(bu 2
runs any custom updaters in \fI/etc/genup/updaters.d\fR
.PP
.RE
The \fBgenup\fR utility can be invoked in non-interactive (default) or
interactive mode (see the \fB--ask\fR option, below).
Non-interactive mode is suitable for scripted invocation, for example
as part of a nightly \fBcron\fR(8) job (see \fBAUTOMATING GENUP\fR, below).
.SH OPTIONS
.TP
.BR \-a ", " \-\-ask
Prompt for confirmation during important steps of the update.
In interactive mode, failures during the @world update allow retry after
manual intervention.
.TP
.BR \-A ", " \-\-alert
Sound the terminal bell when interaction is required.
Selecting this option automatically selects \fB--ask\fR.
.TP
.BR \-b ", " \-\-buildkernel\-args\=ADDITIONAL_ARGS
Pass additional arguments to the initial
.BR buildkernel (8)
invocation used to build the kernel in the staging area.
.TP
.BR \-c ", " \-\-dispatch\-conf
Force \fBdispatch-conf\fR(1) to be run when configuration file updates
are detected, even in non-interactive mode.
.TP
.BR \-C ", " \-\-no\-custom\-updaters
Do not run custom updaters from
\fI/etc/genup/updaters.d\fR.
.TP
.BR \-d ", " \-\-deploy\-from\-staging
Automatically deploy a newly built kernel from the staging area to
the EFI system partition.
.TP
.BR \-\-email
Send status and error notifications via sendmail to the specified
recipient list.
.TP
.BR \-\-email\-from
Specify the sender address used for email notifications.
.TP
.BR \-e ", " \-\-emerge\-args\=ADDITIONAL_ARGS
Pass additional arguments to the main
.BR emerge (1)
invocation.
.TP
.BR \-E ", " \-\-no\-emtee
Do not attempt to use \fBemtee\fR(1), even if installed.
.TP
.BR \-F ", " \-\-no\-fixups
Do not run \fI/etc/cron.weekly/fixup\fR on aarch64 systems.
.TP
.BR \-h ", " \-\-help
Display a short help screen and exit.
.TP
.BR \-i ", " \-\-ignore\-required\-changes
Do not exit with an error if user configuration changes are required
to complete the @world update in non-interactive mode.
.TP
.BR \-k ", " \-\-keep\-old\-distfiles
Do not purge unused source tarballs.
.TP
.BR \-l ", " \-\-live\-rebuild
Rebuild packages in the @live-rebuild set (-9999 ebuilds).
.TP
.BR \-m ", " \-\-no\-eix\-metadata\-update
Do not update eix metadata at end-of-run.
.TP
.BR \-M ", " \-\-no\-module\-rebuild
Do not rebuild external kernel modules.
.TP
.BR \-n ", " \-\-no\-kernel\-upgrade
Do not attempt to build or deploy a new kernel.
.TP
.BR \-p ", " \-\-no\-perl\-cleaner
Do not run \fBperl-cleaner\fR(1).
.TP
.BR \-r ", " \-\-adjustment\=N
Set niceness adjustment (-20 <= N <= 19) for build operations.
.TP
.BR \-S ", " \-\-no\-eix\-sync
Do not run repo sync or eix-sync at start of run.
.TP
.BR \-v ", " \-\-verbose
Enable verbose output.
.TP
.BR \-V ", " \-\-version
Display version number and exit.
.TP
.BR \-x ", " \-\-eix\-sync\-args\=ADDITIONAL_ARGS
Pass additional arguments to
.BR eix-sync (1).
.SH EXIT STATUS
The exit status is 0 if the update completed successfully, and 1 otherwise.
.SH PARALLEL MAKE
If an \fBemerge\fR(1) operation fails, \fBgenup\fR will attempt to resume
the build with parallelism restricted (MAKEOPTS=-j1) and distributed
compilation disabled. A warning is issued if this fallback is required.
.SH AUTOMATING GENUP
\fBgenup\fR may be run unattended, for example via \fBcron\fR(8).
Ensure an appropriate PATH is set.
.SH COPYRIGHT
.nf
Copyright \(co 2014-2020 sakaki
License GPLv3+ (GNU GPL version 3 or later)
<http://gnu.org/licenses/gpl.html>

This is free software, you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.
.fi
.SH AUTHORS
sakaki \- original author
.SH SEE ALSO
.BR dispatch-conf (1),
.BR eclean (1),
.BR emerge (1),
.BR emtee (1),
.BR eix (1),
.BR eix-sync (1),
.BR emaint (1),
.BR nice (1),
.BR perl-cleaner (1),
.BR buildkernel (8),
.BR genkernel (8),
.BR revdep-rebuild (1),
.BR cron (8),
.BR portage (5).
